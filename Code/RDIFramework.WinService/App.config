<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <!--diagnostics performanceCounters="All"/-->
    <!--开启日志功能-->
    <diagnostics>
      <messageLogging  logEntireMessage="true" maxMessagesToLog="300" logMessagesAtServiceLevel="false" logMalformedMessages="false" logMessagesAtTransportLevel="true"/>
    </diagnostics>
    <services>
      <service name="RDIFramework.BizLogic.RDIFrameworkDBProviderService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/RDIFrameworkDBProviderService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IDBProviderService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.BusinessDBProviderService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/BusinessDBProviderService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IDBProviderService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.ExceptionService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/ExceptionService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple" contract="RDIFramework.BizLogic.IExceptionService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.ItemDetailsService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/ItemDetailsService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IItemDetailsService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.ItemsService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/ItemsService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IItemsService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.LogOnService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/LogOnService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.ILogOnService">
        </endpoint>   
      </service>
      <service name="RDIFramework.BizLogic.LogService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/LogService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.ILogService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.ModuleService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/ModuleService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"   contract="RDIFramework.BizLogic.IModuleService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.OrganizeService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/OrganizeService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IOrganizeService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.PermissionItemService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/PermissionItemService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IPermissionItemService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.RoleService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/RoleService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IRoleService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.SequenceService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/SequenceService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.ISequenceService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.UserService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/UserService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"   contract="RDIFramework.BizLogic.IUserService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.TableColumnsService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/TableColumnsService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.ITableColumnsService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.FileService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/FileService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"   contract="RDIFramework.BizLogic.IFileService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.FolderService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/FolderService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IFolderService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.ParameterService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/ParameterService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IParameterService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.DbLinkDefineService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/DbLinkDefineService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IDbLinkDefineService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.PlatFormAddInService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/PlatFormAddInService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IPlatFormAddInService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.QueryEngineService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/QueryEngineService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IQueryEngineService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.StaffService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/StaffService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IStaffService">
        </endpoint>
        <!--
        <host>
          <baseAddresses>
            <add baseAddress="http://127.0.0.1:8889/RDIFramework.BizLogic/StaffService/"/>
          </baseAddresses>
        </host>-->
      </service>
      <service name="RDIFramework.BizLogic.MessageService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/MessageService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IMessageService">
        </endpoint>
        <!--
        <host>
          <baseAddresses>
            <add baseAddress="http://127.0.0.1:8889/RDIFramework.BizLogic/MessageService/"/>
          </baseAddresses>
        </host>-->
      </service>
      <service name="RDIFramework.BizLogic.PermissionService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/PermissionService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IPermissionService"/>
        <!-- <host>
          <baseAddresses>
            <add baseAddress="http://127.0.0.1:8889/RDIFramework.BizLogic/PermissionService/"/>
          </baseAddresses>
        </host>-->
      </service>
      <!--工作流相关-->
      <service name="RDIFramework.BizLogic.WorkFlowInstanceService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/WorkFlowInstanceService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IWorkFlowInstanceService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.WorkFlowHelperService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/WorkFlowHelperService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IWorkFlowHelperService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.WorkFlowTemplateService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/WorkFlowTemplateService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IWorkFlowTemplateService">
        </endpoint>
      </service>
      <service name="RDIFramework.BizLogic.WorkFlowUserControlService" behaviorConfiguration="RDIFrameworkBehaviorCofig">
        <endpoint address="net.tcp://127.0.0.1:8888/RDIFramework.BizLogic/WorkFlowUserControlService/" binding="netTcpBinding" bindingConfiguration="netTcpBindingSmiple"  contract="RDIFramework.BizLogic.IWorkFlowUserControlService">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="RDIFrameworkBehaviorCofig">
          <!-- 为避免泄漏元数据信息，
          请在部署前将以下值设置为 false 并删除上面的元数据终结点  
          <serviceMetadata httpGetEnabled="True"/>-->
          <!-- 要接收故障异常详细信息以进行调试， 
          请将下值设置为 true。在部署前 
            设置为 false 以避免泄漏异常信息-->
          <serviceDebug includeExceptionDetailInFaults="False" />
          
          <serviceCredentials>
            <!-- x509憑證製作            
            makecert -r -pe -n "CN=EricHu-PC" -ss My -sky exchange
            makecert -sr LocalMachine -ss My -n CN=EricHu-PC -sky exchange -pe            
            makecert.exe -sr LocalMachine -ss My -a sha1 -n CN=EricHu-PC -sky exchange –pe
            
            makecert -r -pe -n "CN=220.133.57.144" -ss My -sky exchange
            makecert -sr LocalMachine -ss My -n CN=ArnoWCF -sky exchange -pe            
            makecert.exe -sr LocalMachine -ss My -a sha1 -n CN=ArnoWCF -sky exchange –pe
            
            <serviceCertificate storeName="My" storeLocation="CurrentUser" x509FindType="FindBySubjectName" findValue="220.133.57.144" />
            <clientCertificate >
              <authentication certificateValidationMode="None"  />
            </clientCertificate >
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="RDIFramework.WCFHost.UserNamePasswordValidator,RDIFramework.WCFHost"    />
            -->
          </serviceCredentials>
          <!--
					<serviceMetadata httpGetEnabled="False" />
          -->
          <serviceThrottling maxConcurrentCalls="16" maxConcurrentInstances="10" maxConcurrentSessions="26"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <netTcpBinding>
        <binding name="netTcpBindingSmiple" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
          <!-- 无任何加密模式-->
          <security mode="None">
            <transport clientCredentialType="Windows"/>
            <message clientCredentialType="Windows"/>
          </security>
          <!-- 安全认证模式：Message，客戶端驗證類型：憑證
          <security mode="Message" >
            <message clientCredentialType="Certificate" />
          </security >
          -->
          <!-- 安全認證模式：Transport，客戶端驗證類型：憑證
          <security mode="Transport" >
            <transport clientCredentialType="Certificate" />
          </security >
          -->
          <!-- 安全認證模式：Message，客戶端驗證類型：用户密碼認證
          <security mode="Message" >
            <message clientCredentialType="UserName" />
          </security >
          -->
        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel>
<startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup>
  
  <!--开启日志功能-->
  <system.diagnostics>
    <trace />
    <sources>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="xml"/>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="xml"
           type="System.Diagnostics.XmlWriterTraceListener"  initializeData="c:\temp\RDIFramework.svclog"  traceOutputOptions="Timestamp"/>
    </sharedListeners>
  </system.diagnostics>

</configuration>
